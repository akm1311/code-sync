<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeSync - Real-time Code Sharing</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'mono': ['JetBrains Mono', 'Fira Code', 'Consolas', 'monospace'],
                    },
                    animation: {
                        'pulse-slow': 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'fade-in': 'fadeIn 0.3s ease-in-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(-10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        };
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-slate-50 dark:bg-slate-900 font-sans transition-colors duration-300">
    <!-- Header -->
    <header class="bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-50 backdrop-blur-sm bg-white/80 dark:bg-slate-800/80">
        <div class="max-w-4xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
                        <i class="fas fa-code text-white text-sm"></i>
                    </div>
                    <h1 class="text-xl font-semibold text-slate-900 dark:text-white">CodeSync</h1>
                </div>
                
                <div class="flex items-center space-x-4">
                    <!-- Sync Status -->
                    <div class="flex items-center space-x-2 px-3 py-1.5 bg-emerald-50 dark:bg-emerald-900/20 rounded-full">
                        <div class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse-slow"></div>
                        <span class="text-sm text-emerald-700 dark:text-emerald-300 font-medium">Synced</span>
                    </div>
                    
                    <!-- Theme Toggle -->
                    <button id="themeToggle" class="p-2 rounded-lg bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:inline"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 py-8">
        <!-- Instructions Card -->
        <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6 mb-8">
            <div class="flex items-start space-x-3">
                <div class="w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                    <i class="fas fa-info text-white text-xs"></i>
                </div>
                <div>
                    <h2 class="font-semibold text-blue-900 dark:text-blue-100 mb-2">How it works</h2>
                    <p class="text-blue-800 dark:text-blue-200 text-sm leading-relaxed">
                        Paste or type your code in the editor below. It will automatically sync across all devices accessing this URL. 
                        Use the copy button to quickly copy the shared code to your clipboard.
                    </p>
                </div>
            </div>
        </div>

        <!-- Code Editor Section -->
        <div class="bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm">
            <!-- Editor Header -->
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200 dark:border-slate-700">
                <div class="flex items-center space-x-4">
                    <h3 class="font-medium text-slate-900 dark:text-white">Shared Code</h3>
                    <div class="flex items-center space-x-2 text-sm text-slate-500 dark:text-slate-400">
                        <i class="fas fa-clock text-xs"></i>
                        <span id="lastUpdated">Last updated: Just now</span>
                    </div>
                </div>
                
                <div class="flex items-center space-x-2">
                    <!-- Language Selector -->
                    <select id="languageSelect" class="px-3 py-1.5 text-sm bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="text">Plain Text</option>
                        <option value="javascript">JavaScript</option>
                        <option value="python">Python</option>
                        <option value="java">Java</option>
                        <option value="css">CSS</option>
                        <option value="html">HTML</option>
                        <option value="json">JSON</option>
                    </select>
                    
                    <!-- Copy Button -->
                    <button id="copyButton" class="flex items-center space-x-2 px-4 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium">
                        <i class="fas fa-copy text-xs"></i>
                        <span>Copy</span>
                    </button>
                </div>
            </div>
            
            <!-- Code Textarea -->
            <div class="relative">
                <textarea 
                    id="codeInput" 
                    placeholder="Paste or type your code here... It will automatically sync across all connected devices."
                    class="w-full h-96 p-6 bg-transparent text-slate-900 dark:text-slate-100 font-mono text-sm leading-relaxed resize-none focus:outline-none placeholder-slate-400 dark:placeholder-slate-500"
                    data-mock="true"
                ></textarea>
                
                <!-- Loading Overlay -->
                <div id="loadingOverlay" class="absolute inset-0 bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm flex items-center justify-center hidden">
                    <div class="flex items-center space-x-3 bg-white dark:bg-slate-800 px-4 py-3 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700">
                        <div class="w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"></div>
                        <span class="text-sm text-slate-600 dark:text-slate-400 font-medium">Syncing...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Connection Status -->
        <div class="mt-6 flex items-center justify-between">
            <div class="flex items-center space-x-6 text-sm">
                <!-- Device Count -->
                <div class="flex items-center space-x-2 text-slate-600 dark:text-slate-400">
                    <i class="fas fa-devices text-xs"></i>
                    <span id="deviceCount">2 devices connected</span>
                </div>
                
                <!-- Auto-sync Status -->
                <div class="flex items-center space-x-2 text-slate-600 dark:text-slate-400">
                    <i class="fas fa-sync text-xs"></i>
                    <span>Auto-sync enabled</span>
                </div>
            </div>
            
            <!-- Manual Refresh -->
            <button id="refreshButton" class="flex items-center space-x-2 px-3 py-1.5 text-sm text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors">
                <i class="fas fa-refresh text-xs"></i>
                <span>Refresh</span>
            </button>
        </div>

        <!-- Feature Cards -->
        <div class="grid md:grid-cols-3 gap-6 mt-12">
            <div class="bg-white dark:bg-slate-800 rounded-xl p-6 border border-slate-200 dark:border-slate-700">
                <div class="w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center mb-4">
                    <i class="fas fa-bolt text-blue-600 dark:text-blue-400"></i>
                </div>
                <h3 class="font-semibold text-slate-900 dark:text-white mb-2">Real-time Sync</h3>
                <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">
                    Changes appear instantly across all connected devices. No need to manually refresh or reload.
                </p>
            </div>
            
            <div class="bg-white dark:bg-slate-800 rounded-xl p-6 border border-slate-200 dark:border-slate-700">
                <div class="w-10 h-10 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg flex items-center justify-center mb-4">
                    <i class="fas fa-mobile-alt text-emerald-600 dark:text-emerald-400"></i>
                </div>
                <h3 class="font-semibold text-slate-900 dark:text-white mb-2">Cross-platform</h3>
                <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">
                    Works seamlessly on desktop, tablet, and mobile devices. Share code between any platform.
                </p>
            </div>
            
            <div class="bg-white dark:bg-slate-800 rounded-xl p-6 border border-slate-200 dark:border-slate-700">
                <div class="w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center mb-4">
                    <i class="fas fa-shield-alt text-purple-600 dark:text-purple-400"></i>
                </div>
                <h3 class="font-semibold text-slate-900 dark:text-white mb-2">Secure Sharing</h3>
                <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">
                    Your code is stored securely and only accessible via the unique URL. No account required.
                </p>
            </div>
        </div>
    </main>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="fixed top-20 right-4 z-50 space-y-2"></div>

    <!-- @COMPONENT: ToastNotification [type, message, duration] -->
    <!-- @END_COMPONENT: ToastNotification -->

    <script>
        // TODO: Implement real-time WebSocket connection for live sync
        // TODO: Implement server-side storage and retrieval
        // TODO: Add proper error handling for network issues
        
        (function() {
            // Theme Management
            const themeToggle = document.getElementById('themeToggle');
            const html = document.documentElement;
            
            // Check for saved theme preference or default to light mode
            const savedTheme = localStorage.getItem('theme') || 'light';
            html.classList.toggle('dark', savedTheme === 'dark');
            
            themeToggle.addEventListener('click', () => {
                const isDark = html.classList.contains('dark');
                html.classList.toggle('dark');
                localStorage.setItem('theme', isDark ? 'light' : 'dark');
            });
            
            // Copy to Clipboard Functionality
            const copyButton = document.getElementById('copyButton');
            const codeInput = document.getElementById('codeInput');
            
            copyButton.addEventListener('click', async () => {
                try {
                    await navigator.clipboard.writeText(codeInput.value);
                    showToast('Code copied to clipboard!', 'success');
                    
                    // Visual feedback
                    const icon = copyButton.querySelector('i');
                    const text = copyButton.querySelector('span');
                    icon.className = 'fas fa-check text-xs';
                    text.textContent = 'Copied!';
                    
                    setTimeout(() => {
                        icon.className = 'fas fa-copy text-xs';
                        text.textContent = 'Copy';
                    }, 2000);
                } catch (err) {
                    showToast('Failed to copy code', 'error');
                }
            });
            
            // Mock Auto-sync Simulation
            let lastUpdateTime = new Date();
            const lastUpdatedElement = document.getElementById('lastUpdated');
            
            function updateLastModified() {
                const now = new Date();
                const diffInMinutes = Math.floor((now - lastUpdateTime) / (1000 * 60));
                
                if (diffInMinutes === 0) {
                    lastUpdatedElement.textContent = 'Last updated: Just now';
                } else if (diffInMinutes === 1) {
                    lastUpdatedElement.textContent = 'Last updated: 1 minute ago';
                } else {
                    lastUpdatedElement.textContent = `Last updated: ${diffInMinutes} minutes ago`;
                }
            }
            
            // Update time display every minute
            setInterval(updateLastModified, 60000);
            
            // Mock sync on input change
            codeInput.addEventListener('input', () => {
                lastUpdateTime = new Date();
                updateLastModified();
                
                // Show brief loading state
                const loadingOverlay = document.getElementById('loadingOverlay');
                loadingOverlay.classList.remove('hidden');
                
                setTimeout(() => {
                    loadingOverlay.classList.add('hidden');
                }, 500);
            });
            
            // Refresh functionality
            const refreshButton = document.getElementById('refreshButton');
            refreshButton.addEventListener('click', () => {
                const icon = refreshButton.querySelector('i');
                icon.classList.add('animate-spin');
                
                setTimeout(() => {
                    icon.classList.remove('animate-spin');
                    showToast('Content refreshed', 'success');
                    lastUpdateTime = new Date();
                    updateLastModified();
                }, 1000);
            });
            
            // Toast notification system
            function showToast(message, type = 'info') {
                const toast = document.createElement('div');
                toast.className = `animate-fade-in flex items-center space-x-3 px-4 py-3 rounded-lg shadow-lg border max-w-sm ${
                    type === 'success' ? 'bg-emerald-50 border-emerald-200 text-emerald-800 dark:bg-emerald-900/20 dark:border-emerald-800 dark:text-emerald-200' :
                    type === 'error' ? 'bg-red-50 border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-200' :
                    'bg-blue-50 border-blue-200 text-blue-800 dark:bg-blue-900/20 dark:border-blue-800 dark:text-blue-200'
                }`;
                
                const icon = type === 'success' ? 'fa-check-circle' : 
                           type === 'error' ? 'fa-exclamation-circle' : 
                           'fa-info-circle';
                
                toast.innerHTML = `
                    <i class="fas ${icon} text-sm"></i>
                    <span class="text-sm font-medium">${message}</span>
                `;
                
                const container = document.getElementById('toastContainer');
                container.appendChild(toast);
                
                setTimeout(() => {
                    toast.style.opacity = '0';
                    toast.style.transform = 'translateX(100%)';
                    setTimeout(() => container.removeChild(toast), 300);
                }, 3000);
            }
            
            // Language selector (for future syntax highlighting)
            const languageSelect = document.getElementById('languageSelect');
            languageSelect.addEventListener('change', () => {
                // TODO: Implement syntax highlighting based on selected language
                console.log('Language changed to:', languageSelect.value);
            });
            
            // Mock device count updates
            const deviceCount = document.getElementById('deviceCount');
            let connectedDevices = 2;
            
            // Simulate device connections/disconnections
            setInterval(() => {
                if (Math.random() > 0.8) {
                    connectedDevices += Math.random() > 0.5 ? 1 : -1;
                    connectedDevices = Math.max(1, Math.min(connectedDevices, 5));
                    deviceCount.textContent = `${connectedDevices} device${connectedDevices === 1 ? '' : 's'} connected`;
                }
            }, 10000);
        })();
    </script>
</body>
</html>